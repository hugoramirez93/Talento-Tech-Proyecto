<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/a0f6ea927c.js" crossorigin="anonymous"></script>
    <title>Proyecto Talento Tech</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- Header -->
    <div class="header">
        <div>
            <i class="fa-brands fa-square-steam"></i>
        </div>
        <div class="main-title">
            <h1>Game Library Guide</h1>
        </div>
        <div class="btn">
            <div class="account"><a href="account.html"><button>Account</button></a></div>
            <div class="register"><a href="register.html"><button>Register</button></a></div>
        </div>
    </div>

    <!-- Contenedor de tarjetas -->
    <div class="webpage">        
        <div class="general">
            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>FORTNITE</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.fortnite.com/download?lang=es-ES" target="_blank">
                            <img src="https://cms-assets.unrealengine.com/cm6l5gfpm05kr07my04cqgy2x/cm9wwjg2r2n9e08n4hrfeouns"
                                alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Fortnite’s most positive aspect is its fast-paced, creative gameplay with constant updates.
                            You should play it for its fun building mechanics, vibrant style, and massive events that
                            keep the experience fresh and highly entertaining for everyone.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Battle Royale</button>
                        <button>Multiplayer</button>
                        <button>Singleplayer</button>
                        <button>Competitive</button>
                        <button>Online</button>
                        <button>PC</button>
                        <button>PS5</button>
                        <button>XB</button>
                        <button>Shooter</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>APEX LEGENDS</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.apexlegends.com/" target="_blank">
                            <img src="https://assets.nintendo.com/image/upload/c_fill,w_1200/q_auto:best/f_auto/dpr_2.0/ncom/software/switch/70010000024591/335050bb1616a679bc49a7ad690aa325f80014190677239c9250775789807114"
                                alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Apex Legends shines with its unique character abilities and smooth, squad-based action. You
                            should play it for the strategic teamplay, fast-paced movement, and constant content updates
                            that make every match exciting and competitive.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Battle Royale</button>
                        <button>Multiplayer</button>
                        <button>Singleplayer</button>
                        <button>PC</button>
                        <button>PS5</button>
                        <button>XB</button>
                        <button>Shooter</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>MARIO KART</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.mariokart.com/" target="_blank">
                            <img src="https://sm.ign.com/ign_es/news/m/mario-kart/mario-kart-world-direct-everything-announced-for-the-switch_j5aw.jpg"
                                alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Mario Kart’s most positive aspect is its fun, accessible racing gameplay for all ages. You
                            should play it for chaotic item battles, creative tracks, and unforgettable multiplayer
                            moments with friends or family, both online and offline.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Racing</button>
                        <button>Multiplayer</button>
                        <button>Singleplayer</button>
                        <button>Party</button>
                        <button>Online</button>
                        <button>Arcade</button>
                        <button>PC</button>
                        <button>Switch</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>LOL</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.leagueoflegends.com/es-es/" target="_blank">
                            <img src="https://cdn1.epicgames.com/offer/24b9b5e323bc40eea252a10cdd3b2f10/EGS_LeagueofLegends_RiotGames_S1_2560x1440-80471666c140f790f28dff68d72c384b"
                                alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            League of Legends thrives on deep strategy and champion variety. You should play it for the
                            competitive thrill, constant updates, and team-based gameplay that reward skill,
                            coordination, and mastery in one of the top esports games worldwide.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>MOBA</button>
                        <button>Strategy</button>
                        <button>Team</button>
                        <button>Competitive</button>
                        <button>Singleplayer</button>
                        <button>PC</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>DOTA 2</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.dota2.com/" target="_blank">
                            <img src="https://tagyard.com/academy/media/course_cover/5f950a14e2e1f.jpg" alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Dota 2’s strongest point is its incredible depth and limitless strategic possibilities. You
                            should play it for the rewarding challenge, diverse heroes, and intense team battles that
                            test your decision-making and skill in every thrilling match.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>MOBA</button>
                        <button>Strategy</button>
                        <button>Team</button>
                        <button>Online</button>
                        <button>Competitive</button>
                        <button>Singleplayer</button>
                        <button>PC</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>CS:GO</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.csgo.com/" target="_blank">
                            <img src="https://japangemu.com/wp-content/uploads/2023/03/csgo.jpg" alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            CS:GO excels with its precise gunplay and tight team tactics. You should play it for the
                            competitive rush, skill-based mechanics, and legendary status as one of the most respected
                            and enduring shooters in gaming history.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Battle Royale</button>
                        <button>Multiplayer</button>
                        <button>Singleplayer</button>
                        <button>PC</button>
                        <button>PS5</button>
                        <button>XB</button>
                        <button>Shooter</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>MINECRAFT</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.minecraft.net/es-es" target="_blank">
                            <img src="https://assets.nintendo.com/image/upload/q_auto/f_auto/ncom/software/switch/70010000000964/a28a81253e919298beab2295e39a56b7a5140ef15abdb56135655e5c221b2a3a"
                                alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Minecraft’s most positive aspect is its endless creativity and freedom to build anything.
                            You should play it for the relaxing sandbox experience, survival adventure, and the ability
                            to craft entire worlds solo or with friends, your way.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Sandbox</button>
                        <button>Survival</button>
                        <button>Building</button>
                        <button>Party</button>
                        <button>Adventure</button>
                        <button>Singleplayer</button>
                        <button>Multiplayer</button>
                        <button>Online</button>
                        <button>PC</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>FIFA</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.fifa.com/es-es" target="_blank">
                            <img src="https://media.vandal.net/i/1200x1200/58174/fifa-19-20192109571950_1.jpg" alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            FIFA’s top strength is its realistic gameplay and official licenses. You should play it for
                            the thrill of competitive football, authentic teams and stadiums, and engaging modes like
                            Career and Ultimate Team that keep fans coming back.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Sports</button>
                        <button>Simulation</button>
                        <button>Competitive</button>
                        <button>Singleplayer</button>
                        <button>Multiplayer</button>
                        <button>Online</button>
                        <button>PC</button>
                        <button>PS5</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>SMASH BROS</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.smashbros.com/es_ES/" target="_blank">
                            <img src="https://assets.nintendo.com/image/upload/c_fill,w_1200/q_auto:best/f_auto/dpr_2.0/ncom/software/switch/70010000012332/ac4d1fc9824876ce756406f0525d50c57ded4b2a666f6dfe40a6ac5c3563fad9"
                                alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Super Smash Bros. stands out with its iconic roster and chaotic, fun combat. You should play
                            it for fast-paced battles, local and online multiplayer excitement, and the joy of seeing
                            your favorite characters clash in creative, action-packed stages.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Fighting</button>
                        <button>Multiplayer</button>
                        <button>Singleplayer</button>
                        <button>Party</button>
                        <button>Competitive</button>
                        <button>Platformer</button>
                        <button>Online</button>
                        <button>PC</button>
                        <button>Switch</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>ELDER RING</h3>
                    </div>
                    <div class="image">
                        <a href="https://store.steampowered.com/app/1245620/ELDEN_RING/" target="_blank">
                            <img src="https://image.api.playstation.com/vulcan/ap/rnd/202110/2000/YMUoJUYNX0xWk6eTKuZLr5Iw.jpg"
                                alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Elden Ring excels with its vast open world, deep lore, and challenging combat. You should
                            play it for the thrill of exploration, rewarding difficulty, and the freedom to shape your
                            journey in a beautifully crafted dark fantasy realm.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Action RPG</button>
                        <button>Online</button>
                        <button>Singleplayer</button>
                        <button>Soulslike</button>
                        <button>Platformer</button>
                        <button>PC</button>
                        <button>PS5</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>WU-KONG</h3>
                    </div>
                    <div class="image">
                        <a href="https://store.steampowered.com/app/2358720/Black_Myth_Wukong/?l=spanish"
                            target="_blank">
                            <img src="https://cdn.mos.cms.futurecdn.net/imVtdsz2J3FCd7tPPkPcNm.jpg" alt="">
                        </a>
                    </div>
                    <div class="description">
                        <p>
                            Wukong (Black Myth: Wukong) impresses with stunning visuals, mythological storytelling, and
                            fluid combat. You should play it for its epic journey inspired by Chinese legend, cinematic
                            design, and intense action that blends tradition with next-gen gameplay.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>Action RPG</button>
                        <button>Soulslike</button>
                        <button>Singleplayer</button>
                        <button>Mythology</button>
                        <button>Fantasy</button>
                        <button>PC</button>
                        <button>PS5</button>
                    </div>
                </div>
            </div>

            <div class="contenedor">
                <div class="card">
                    <div class="title">
                        <h3>WOW</h3>
                    </div>
                    <div class="image">
                        <a href="https://www.worldofwarcraft.com/es-es" target="_blank">
                            <img src="https://cdn.hobbyconsolas.com/sites/navi.axelspringer.es/public/media/image/2017/04/world-warcraft.jpg?tf=3840x"
                                alt="">
                        </a>
                    </div>
                    <div class=" description">
                        <p>
                            World of Warcraft’s greatest strength is its rich world-building and endless content.
                            You should play it for the immersive lore, cooperative gameplay, and massive online
                            world where every quest, raid, and character progression feels like an epic adventure.
                        </p>
                    </div>
                    <div class="category-title">
                        <h6>Categories:</h6>
                    </div>
                    <div class="category">
                        <button>MMORPG</button>
                        <button>Team</button>
                        <button>Co-op</button>
                        <button>Competitive</button>
                        <button>Online</button>
                        <button>Fantasy</button>
                        <button>Adventure</button>
                        <button>Singleplayer</button>
                        <button>PC</button>
                    </div>
                </div>
            </div>


        </div>
        
        <div class="info-page">
            <div class="add-game">
                <h2>Agregar un nuevo juego:</h2>
                <form id="form-juego">
                    <input type="text" id="titulo" placeholder="Título" required>
                    <input type="text" id="genero" placeholder="Género" required>
                    <!-- <input type="date" id="fecha" placeholder="Fecha de lanzamiento"> -->
                    <input type="text" id="descripcion" placeholder="Descripción">
                    <input type="text" id="imagen_url" placeholder="URL de la imagen (opcional)">
                    <input type="text" id="url_descarga" placeholder="URL de descarga">
                    <button type="submit" class="btn-agregar">Agregar Juego</button>
                </form>
                <div id="msg"></div>
            </div>
            <div class="title-info">
                <h1>Game Library Guide</h1>
            </div>

            <div class="description-info">Steam is the world’s leading digital platform for PC gaming, known for its
                massive game library, regular discounts, community features, and easy game management. Its most positive
                aspect is the convenience it offers to discover, buy, and play games. You should use Steam because it
                centralizes your gaming experience with cloud saves, updates, mods, and a vibrant global community.
            </div>

            <div class="steam">
                <a href="https://store.steampowered.com/" target="_blank">
                    <i class="fa-brands fa-square-steam"></i>
                </a>
            </div>
        </div>
    </div>


    <script>
        // Usamos fetch para pedir los juegos al backend
        fetch('http://localhost:3000/api/juegos')
            .then(response => response.json()) // Cuando responde, lo convierte en objeto
            .then(juegos => {
                // Selecciona el div donde quieres poner las tarjetas (puedes crear uno con id="juegos" si quieres)
                const general = document.querySelector('.general');
                general.innerHTML = ''; // Limpia el contenido anterior

                juegos.forEach(juego => {
                    const tarjeta = document.createElement('div');
                    tarjeta.className = 'contenedor';

                    // 1. Arma el contenido de la tarjeta en una variable
                    let contenidoCard = `
      <div class="card">
        <div class="title"><h3>${juego.titulo}</h3></div>
        <div class="image">
          <img src="${juego.imagen_url || ''}" alt="${juego.titulo}">
        </div>
        <div class="description">
          <p>${juego.descripcion || ''}</p>
        </div>
        <div class="category-title">
          <h6>${juego.genero || ''}</h6>
        </div>
        <div class="category">
          <button>${juego.genero || ''}</button>
        </div>
        <div class="actions">
          <button class="btn-edit" data-id="${juego.id}">Editar</button>
          <button class="btn-delete" data-id="${juego.id}">Eliminar</button>
        </div>
      </div>
    `;

                    // 2. Si existe url_descarga, haz que toda la tarjeta sea un enlace
                    if (juego.url_descarga) {
                        tarjeta.innerHTML = `<a href="${juego.url_descarga}" target="_blank" style="text-decoration: none; color: inherit;">${contenidoCard}</a>`;
                    } else {
                        tarjeta.innerHTML = contenidoCard;
                    }

                    general.appendChild(tarjeta);
                });

            })
            .catch(error => {
                console.error('Error al cargar los juegos:', error);
            });



        document.getElementById('form-juego').addEventListener('submit', function (event) {
            event.preventDefault(); // Prevenir que se recargue la página

            if (!confirm('¿Seguro que quieres agregar este juego?'))
                return;

            // Obtén los valores del formulario
            const titulo = document.getElementById('titulo').value;
            const genero = document.getElementById('genero').value;
            // const fecha = document.getElementById('fecha').value;
            const descripcion = document.getElementById('descripcion').value;
            const imagen_url = document.getElementById('imagen_url').value;
            const url_descarga = document.getElementById('url_descarga').value;

            // Construye el objeto para enviar
            console.log({
                titulo,
                genero,
                // fecha_lanzamiento: fecha,
                descripcion,
                imagen_url,
                url_descarga
            });

            // Envía los datos al backend usando fetch y método POST
            fetch('http://localhost:3000/api/juegos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    titulo,
                    genero,
                    // fecha_lanzamiento: fecha,
                    descripcion,
                    imagen_url,
                    url_descarga
                })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.id) {
                        document.getElementById('msg').textContent = '¡Juego agregado!';
                        // Opcional: refresca la lista de juegos automáticamente
                        location.reload();
                    } else {
                        document.getElementById('msg').textContent = 'Ocurrió un error: ' + (data.error || 'No se pudo agregar el juego');
                    }
                })
                .catch(error => {
                    document.getElementById('msg').textContent = 'Error al conectar: ' + error;
                });
        });

        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('btn-edit')) {
                e.preventDefault();
                e.stopPropagation();
                const id = e.target.getAttribute('data-id');
                if (confirm('¿Seguro que quieres editar este juego?')) {
                    fetch(`http://localhost:3000/api/juegos/${id}`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            titulo,
                            genero,
                            // fecha_lanzamiento: fecha,
                            descripcion,
                            imagen_url,
                            url_descarga
                        })
                    })
                        .then(res => res.json())
                        .then(data => {
                            if (data.success) {
                                location.reload();
                            } else {
                                alert('No se pudo editar');
                            }
                        });
                }
            }
        });


        document.addEventListener('click', function (e) {
            if (e.target.classList.contains('btn-delete')) {
                e.preventDefault();
                e.stopPropagation();
                const id = e.target.getAttribute('data-id');
                if (confirm('¿Seguro que quieres eliminar este juego?')) {
                    fetch(`http://localhost:3000/api/juegos/${id}`, {
                        method: 'DELETE'
                    })
                        .then(res => res.json())
                        .then(data => {
                            if (data.success) {
                                location.reload();
                            } else {
                                alert('No se pudo eliminar');
                            }
                        });
                }
            }
        });



    </script>

</body>

</html>